@tailwind base;
@tailwind components;
@tailwind utilities;

/* DaVinci Resolve-inspired theme: fundo escuro + amarelo (hover) e roxo */
:root {
  --resolve-bg: #0d0d0f;
  --resolve-panel: #1a1a1e;
  --resolve-border: #2e2e32;
  --resolve-text: #e8e8ec;
  --resolve-muted: #8e8e93;
  --resolve-accent: #5c7c99;
  --resolve-yellow: #f5c518;
  --resolve-yellow-dark: #b8a035;
  --resolve-purple: #6b5b95;
  --resolve-purple-light: #8b7ab5;
  --cinema-success: #2d8a5e;
  --cinema-danger: #c94a4a;

  /* Layout mestre: margem horizontal (Header e BottomNav) */
  --page-gutter: 40px;
  /* Conteúdo principal: mais espaço lateral (tabelas) */
  --page-gutter-content: 48px;
  /* Espaçamento entre seções (replicar em todas as páginas) */
  --page-section-gap: 1rem;      /* 16px mobile */
  --page-section-gap-sm: 1.25rem;
  --page-section-gap-md: 1.5rem;
  --page-section-gap-lg: 2rem;
}

html {
  background-color: #0d0d0f;
}

@media (max-width: 480px) {
  :root {
    --page-gutter: 24px;
    --page-gutter-content: 28px;
  }
}

body {
  background-color: #0d0d0f !important;
  color: #e8e8ec !important;
  font-size: 13px;
  min-height: 100vh;
}

/* Remove spin buttons from number inputs */
input[type='number']::-webkit-inner-spin-button,
input[type='number']::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
input[type='number'] {
  -moz-appearance: textfield;
}

/* MiniTables (e inputs escuros): evita fundo branco no Safari/WebKit (Mac) por autofill/estilos nativos */
.minitables-input::-webkit-autofill,
.minitables-input::-webkit-autofill:hover,
.minitables-input::-webkit-autofill:focus {
  -webkit-text-fill-color: var(--resolve-text);
  -webkit-box-shadow: 0 0 0 1000px var(--resolve-bg) inset;
  caret-color: var(--resolve-text);
}
.minitables-input {
  -webkit-appearance: none;
  appearance: none;
}

/* Input date: ícone do calendário no amarelo padrão do sistema (#f5c518) */
.input-date-yellow-calendar {
  accent-color: var(--resolve-yellow);
}
.input-date-yellow-calendar::-webkit-calendar-picker-indicator {
  filter: invert(88%) sepia(55%) saturate(1234%) hue-rotate(1deg);
  cursor: pointer;
}

/* Budget table: sempre layout de tabela horizontal; overflow no container do bloco */
.budget-table-cards {
  min-width: 0;
}
.budget-table-cards tbody tr {
  display: table-row;
}
.budget-table-cards tbody td {
  display: table-cell;
}
.budget-table-cards thead th.budget-th-remove,
.budget-table-cards thead th.budget-th-add-compl {
  width: 40px;
  min-width: 40px;
  max-width: 40px;
  padding: 0;
  box-sizing: border-box;
}
.budget-table-cards tbody td input[type="number"],
.budget-table-cards tbody td input[placeholder="R$ 0,00"] {
  min-width: 0;
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
}
.budget-table-cards tbody td.budget-cell-qty {
  overflow: hidden;
  width: 32px;
  min-width: 32px;
  max-width: 32px;
  padding-left: 2px;
  padding-right: 2px;
  box-sizing: border-box;
}
.budget-table-cards tbody td.budget-cell-total {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}
.budget-table-cards .budget-row-remove,
.budget-table-cards .budget-row-add-compl {
  width: 40px !important;
  min-width: 40px !important;
  max-width: 40px !important;
  padding: 0 !important;
  text-align: center;
  vertical-align: middle;
  overflow: visible;
  box-sizing: border-box;
  position: relative;
  border-left: none;
}
/* Separador vertical em altura total da linha (cobre de cima até a base) */
.budget-table-cards .budget-row-add-compl::before,
.budget-table-cards .budget-row-remove::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 1px;
  background: var(--resolve-border);
  pointer-events: none;
}
.budget-table-cards .btn-remove-row {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  font-size: 1.25rem;
  line-height: 1;
  font-weight: 700;
  color: var(--resolve-muted);
  background: transparent;
  border: 1px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: color 0.2s, background-color 0.2s, border-color 0.2s;
}
.budget-table-cards .btn-remove-row:hover {
  color: var(--cinema-danger) !important;
  border-color: var(--cinema-danger);
  background: rgba(201, 74, 74, 0.1);
}
/* Botão "Adicionar linha complementar": hover amarelo (vermelho é só para exclusão) */
.budget-table-cards .budget-row-add-compl .btn-remove-row:hover {
  color: var(--resolve-yellow) !important;
  border-color: var(--resolve-yellow);
  background: rgba(245, 197, 24, 0.12);
}

/* Linha complementar: altura menor que a do profissional e alinhamento do campo Valor com Qtd */
.budget-table-cards tr.budget-row-complementary td:not(.budget-row-add-compl):not(.budget-row-remove) {
  padding-top: 2px;
  padding-bottom: 2px;
}
.budget-table-cards .budget-compl-cell-valor {
  padding-right: 2px;
  box-sizing: border-box;
}
.budget-table-cards .budget-compl-cell-valor input {
  text-align: right;
}

/* Linha complementar: ícone de desdobramento (↪) à direita da célula vazia */
.budget-table-cards .budget-compl-cell-icon {
  vertical-align: middle;
  text-align: right;
}
.budget-table-cards .budget-compl-cell-icon span {
  display: inline-flex;
  width: 100%;
  justify-content: flex-end;
}

/* Linhas complementares: sem bordas horizontais entre elas (bloco único visual) */
.budget-table-cards tr.budget-row-complementary {
  border-bottom: none !important;
}
.budget-table-cards tr.budget-row-complementary td {
  border-bottom: none !important;
}

/* Última linha complementar: sem linha abaixo, cantos arredondados */
.budget-table-cards tr.budget-row-complementary-last td {
  border-bottom: none !important;
}
.budget-table-cards tr.budget-row-complementary-last td:first-child {
  border-bottom-left-radius: 6px;
}
.budget-table-cards tr.budget-row-complementary-last td:last-child {
  border-bottom-right-radius: 6px;
}
/* Espaço entre última complementar e profissional: linha de spacer no DOM (BudgetTableRow) */
.budget-table-cards tr.budget-compl-spacer td {
  border: none !important;
  line-height: 0;
  overflow: hidden;
}
/* Linha separadora no topo da linha de profissional que vem após o spacer */
.budget-table-cards tr.budget-compl-spacer + tr {
  border-top: 1px solid var(--resolve-border);
}

/* Mobile: linhas duplas apenas na tabela principal; preencher toda a largura horizontal */
@media (max-width: 767px) {
  .budget-table-cards.budget-table-main {
    display: block;
    width: 100% !important;
    min-width: 0;
  }
  .budget-table-cards.budget-table-main thead {
    display: none;
  }
  .budget-table-cards.budget-table-main tbody {
    display: block;
    width: 100%;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor,
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost {
    display: grid;
    width: 100%;
    min-width: 0;
    gap: 0.08rem 0.15rem;
    padding: 0.35rem 0;
    border-bottom: 1px solid var(--resolve-border);
    align-items: center;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor {
    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr) minmax(0, 1fr) minmax(0, 1fr) minmax(0, max-content) 28px 28px;
    grid-template-rows: auto auto;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td {
    min-width: 0;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(1) {
    grid-column: 1 / span 3;
    grid-row: 1;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(2) {
    grid-column: 4 / span 3;
    grid-row: 1;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(3),
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(4),
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(5) {
    grid-row: 2;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(3) { grid-column: 1; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(4) { grid-column: 2; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(5) { grid-column: 3; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(6) {
    grid-column: 4;
    grid-row: 2;
    min-width: 28px;
    max-width: 28px;
    padding-left: 2px;
    padding-right: 2px;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(7) { grid-column: 5; grid-row: 2; text-align: left; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(8),
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(9) {
    grid-row: 2;
    min-width: 28px !important;
    max-width: 28px !important;
    width: 28px !important;
    padding: 2px !important;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(8) { grid-column: 6; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-labor td:nth-child(9) { grid-column: 7; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost {
    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr) minmax(0, 1fr) minmax(0, max-content) 28px;
    grid-template-rows: auto auto;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td {
    min-width: 0;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(1) {
    grid-column: 1 / span 2;
    grid-row: 1;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(2) {
    grid-column: 3 / span 2;
    grid-row: 1;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(3),
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(4) {
    grid-row: 2;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(3) { grid-column: 1; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(4) { grid-column: 2; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(5) {
    grid-column: 3;
    grid-row: 2;
    min-width: 28px;
    max-width: 28px;
    padding-left: 2px;
    padding-right: 2px;
  }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(6) { grid-column: 4; grid-row: 2; text-align: left; }
  .budget-table-cards.budget-table-main tbody tr.budget-row-cost td:nth-child(7) {
    grid-column: 5;
    grid-row: 2;
    min-width: 28px !important;
    max-width: 28px !important;
    width: 28px !important;
    padding: 2px !important;
  }
  .budget-table-cards.budget-table-main .btn-remove-row {
    width: 24px !important;
    height: 24px !important;
    font-size: 1.1rem;
  }
}

/* Workflow lock: orçamento/final travado */
.locked-sheet {
  pointer-events: none;
  opacity: 0.7;
}
.locked-sheet input,
.locked-sheet select,
.locked-sheet textarea {
  background: #222 !important;
  color: #777 !important;
  border-color: transparent !important;
}

/* Hover amarelo (Resolve) em botões e nav */
.btn-resolve-hover:hover {
  border-color: var(--resolve-yellow) !important;
  color: var(--resolve-yellow) !important;
}

/* Hover vermelho para botões de excluir/remover (fora da tabela de orçamento) */
.btn-danger-hover:hover {
  border-color: var(--cinema-danger) !important;
  color: var(--cinema-danger) !important;
  background: rgba(201, 74, 74, 0.1) !important;
}
.nav-btn-resolve:hover {
  color: var(--resolve-yellow) !important;
  border-color: var(--resolve-yellow) !important;
}
.nav-btn-resolve.active {
  color: var(--resolve-yellow) !important;
  border-color: var(--resolve-yellow) !important;
}

/* Equipe: botões de informação (hover amarelo; !important para vencer estilos inline) */
.team-info-btn:hover {
  border-color: var(--resolve-yellow) !important;
  color: var(--resolve-yellow) !important;
}

/* ========== LAYOUT MESTRE (páginas: Orçamento, Filme, Config, etc.) ========== */
.page-layout {
  padding-top: 0.25rem;
  padding-bottom: var(--page-section-gap-lg);
  max-width: 100%;
}

.page-layout__title {
  font-size: 0.8125rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin-bottom: var(--page-section-gap);
  margin-left: 0;
  margin-right: 0;
}

@media (min-width: 640px) {
  .page-layout__title {
    margin-bottom: var(--page-section-gap-sm);
  }
}

@media (min-width: 1024px) {
  .page-layout__title {
    margin-bottom: var(--page-section-gap-md);
  }
}

/* Financial strip: sticky apenas em telas maiores; no mobile rola com a página */
.page-layout__strip {
  margin-bottom: var(--page-section-gap);
  background-color: var(--resolve-bg);
}

@media (min-width: 640px) {
  .page-layout__strip {
    position: sticky;
    top: 72px; /* altura do header */
    z-index: 40;
    margin-bottom: var(--page-section-gap-md);
  }
}

.page-layout__tabs {
  margin-bottom: var(--page-section-gap);
}

@media (min-width: 640px) {
  .page-layout__tabs {
    margin-bottom: var(--page-section-gap-md);
  }
}

.page-layout__toolbar {
  margin-bottom: var(--page-section-gap);
}

@media (min-width: 640px) {
  .page-layout__toolbar {
    margin-bottom: var(--page-section-gap-md);
  }
}

.page-layout__content {
  margin-top: 0;
  width: 100%;
  min-width: 0;
  max-width: none;
}

.page-layout__content--grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--page-section-gap);
  min-width: 0;
}

.page-layout__content--grid > * {
  min-width: 0;
}

@media (min-width: 640px) {
  .page-layout__content--grid {
    gap: var(--page-section-gap-md);
  }
}

/* 2 colunas apenas em telas grandes (ex.: > 15"); 13" (1280-1440px) fica em 1 coluna */
@media (min-width: 1536px) {
  .page-layout__content--grid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--page-section-gap-lg);
  }
}
